<% content_for :title, "Configuration - Quran Admin" %>

    <h2 class="text-3xl font-bold text-green-700 mb-6 flex items-center space-x-2">
      <i class="fas fa-cog"></i><span>System Configuration</span>
    </h2>

    <%= form_with url: admin_configuration_path, method: :patch, class: "space-y-8" do |f| %>
      <!-- General Settings -->
      <div class="bg-white shadow-lg rounded-xl p-6">
        <h3 class="text-xl font-semibold text-green-700 mb-4 flex items-center space-x-2">
          <i class="fas fa-info-circle"></i><span>General Settings</span>
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Site Name</label>
            <input type="text" name="app[site_name]" value="<%= @app_settings[:site_name] %>" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            <p class="text-xs text-gray-500 mt-1">Name displayed in website header</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Default Translation</label>
            <select name="app[default_translation]" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
              <option value="english" <%= @app_settings[:default_translation] == 'english' ? 'selected' : '' %>>English</option>
              <option value="urdu" <%= @app_settings[:default_translation] == 'urdu' ? 'selected' : '' %>>Urdu</option>
              <option value="french" <%= @app_settings[:default_translation] == 'french' ? 'selected' : '' %>>French</option>
              <option value="spanish" <%= @app_settings[:default_translation] == 'spanish' ? 'selected' : '' %>>Spanish</option>
            </select>
            <p class="text-xs text-gray-500 mt-1">Default language for new orders</p>
          </div>
        </div>
      </div>

      <!-- Order Management -->
      <div class="bg-white shadow-lg rounded-xl p-6">
        <h3 class="text-xl font-semibold text-blue-700 mb-4 flex items-center space-x-2">
          <i class="fas fa-shopping-cart"></i><span>Order Management</span>
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Order Limit Per Day</label>
            <input type="number" name="app[order_limit_per_day]" value="<%= @app_settings[:order_limit_per_day] %>" min="1" max="1000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <p class="text-xs text-gray-500 mt-1">Maximum orders per day</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Max Daily Orders</label>
            <input type="number" name="app[max_daily_orders]" value="<%= @app_settings[:max_daily_orders] %>" min="1" max="10000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <p class="text-xs text-gray-500 mt-1">Absolute daily order limit</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Auto-refresh Interval</label>
            <select name="app[auto_refresh_interval]" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="30" <%= @app_settings[:auto_refresh_interval] == 30 ? 'selected' : '' %>>30 seconds</option>
              <option value="60" <%= @app_settings[:auto_refresh_interval] == 60 ? 'selected' : '' %>>1 minute</option>
              <option value="300" <%= @app_settings[:auto_refresh_interval] == 300 ? 'selected' : '' %>>5 minutes</option>
              <option value="600" <%= @app_settings[:auto_refresh_interval] == 600 ? 'selected' : '' %>>10 minutes</option>
            </select>
            <p class="text-xs text-gray-500 mt-1">Dashboard update frequency</p>
          </div>
        </div>
      </div>

      <!-- System Preferences -->
      <div class="bg-white shadow-lg rounded-xl p-6">
        <h3 class="text-xl font-semibold text-purple-700 mb-4 flex items-center space-x-2">
          <i class="fas fa-sliders-h"></i><span>System Preferences</span>
        </h3>
        <div class="space-y-4">
          <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
            <div>
              <h4 class="font-medium text-gray-800">Email Notifications</h4>
              <p class="text-sm text-gray-600">Enable system-wide email notifications</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" name="app[email_notifications]" <%= @app_settings[:email_notifications] ? 'checked' : '' %> class="sr-only peer">
              <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-[.75rem] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
            </label>
          </div>

          <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
            <div>
              <h4 class="font-medium text-gray-800">Debug Mode</h4>
              <p class="text-sm text-gray-600">Show detailed error messages and debug info</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" name="app[debug_mode]" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-[.75rem] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
            </label>
          </div>

          <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
            <div>
              <h4 class="font-medium text-gray-800">Maintenance Mode</h4>
              <p class="text-sm text-gray-600">Temporarily disable public access for maintenance</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" name="app[maintenance_mode]" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-[.75rem] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600">
                <span class="ml-3 text-sm font-medium text-gray-900">OFF</span>
              </div>
            </label>
          </div>
        </div>
      </div>

      <!-- Inventory Settings -->
      <div class="bg-white shadow-lg rounded-xl p-6">
        <h3 class="text-xl font-semibold text-orange-700 mb-4 flex items-center space-x-2">
          <i class="fas fa-warehouse"></i><span>Inventory Settings</span>
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Low Stock Threshold</label>
            <input type="number" name="app[low_stock_threshold]" value="100" min="1" max="1000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
            <p class="text-xs text-gray-500 mt-1">Units remaining before low stock alert</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Auto-reorder Point</label>
            <input type="number" name="app[auto_reorder_point]" value="50" min="1" max="500" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
            <p class="text-xs text-gray-500 mt-1">Units before automatic reorder recommendation</p>
          </div>
        </div>
      </div>

      <!-- Current System Status -->
      <div class="bg-white shadow-lg rounded-xl p-6">
        <h3 class="text-xl font-semibold text-gray-700 mb-4 flex items-center space-x-2">
          <i class="fas fa-server"></i><span>System Status</span>
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="flex items-center space-x-3 p-3 bg-green-50 border-l-4 border-green-500">
            <i class="fas fa-check-circle text-green-600"></i>
            <div>
              <div class="font-medium text-sm">Database</div>
              <div class="text-xs text-gray-600">Connected</div>
            </div>
          </div>

          <div class="flex items-center space-x-3 p-3 bg-green-50 border-l-4 border-green-500">
            <i class="fas fa-check-circle text-green-600"></i>
            <div>
              <div class="font-medium text-sm">Background Jobs</div>
              <div class="text-xs text-gray-600">Active</div>
            </div>
          </div>

          <div class="flex items-center space-x-3 p-3 bg-green-50 border-l-4 border-green-500">
            <i class="fas fa-check-circle text-green-600"></i>
            <div>
              <div class="font-medium text-sm">File Storage</div>
              <div class="text-xs text-gray-600">OK</div>
            </div>
          </div>
        </div>

        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
          <div class="flex justify-between items-center mb-2">
            <span class="text-sm font-medium">Last System Check:</span>
            <span class="text-sm text-gray-600"><%= Time.current.strftime('%Y-%m-%d %H:%M:%S') %></span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm font-medium">Uptime:</span>
            <span class="text-sm text-gray-600"><%= distance_of_time_in_words(Time.current.beginning_of_day, Time.current) %></span>
          </div>
        </div>
      </div>

      <!-- Save and Advanced Actions -->
      <div class="flex justify-between items-center">
        <div class="flex space-x-3">
          <button type="button" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition text-sm">
            <i class="fas fa-undo"></i> Reset to Defaults
          </button>
          <button type="button" class="bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition text-sm">
            <i class="fas fa-tools"></i> Advanced Settings
          </button>
        </div>

        <button type="submit" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition flex items-center space-x-2">
          <i class="fas fa-save"></i>
          <span>Save Configuration</span>
        </button>
      </div>
    <% end %>