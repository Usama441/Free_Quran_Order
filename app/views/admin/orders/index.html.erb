<!-- Orders Table Container -->
<%= turbo_stream_from "admin_orders_live" %>
<div class="container mx-auto px-4 py-8" data-controller="orders-management"
     data-orders-management-pending-count-target="pendingCount"
     data-orders-management-processing-count-target="processingCount"
     data-orders-management-shipped-count-target="shippedCount"
     data-orders-management-delivered-count-target="deliveredCount">
  <div class="flex justify-between items-center mb-6">
  <h2 class="text-3xl font-bold text-green-700 flex items-center space-x-2">
    <i class="fas fa-shopping-cart"></i><span>Order Management</span>
  </h2>

  <!-- Export Button -->
  <%= link_to '#', class: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center space-x-2" do %>
    <i class="fas fa-download"></i><span>Export CSV</span>
  <% end %>
</div>

<!-- Status Counts -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
  <div class="bg-white shadow-md rounded-xl p-6 border-l-4 border-red-500">
    <div class="flex justify-between items-center">
      <div>
        <p class="text-gray-500 text-sm">Pending Orders</p>
        <h3 class="text-2xl font-bold text-red-600" id="pending-count"><%= @pending_count %></h3>
      </div>
      <i class="fas fa-clock text-red-500 text-3xl"></i>
    </div>
  </div>
  <div class="bg-white shadow-md rounded-xl p-6 border-l-4 border-yellow-500">
    <div class="flex justify-between items-center">
      <div>
        <p class="text-gray-500 text-sm">Processing</p>
        <h3 class="text-2xl font-bold text-yellow-600" id="processing-count"><%= @processing_count %></h3>
      </div>
      <i class="fas fa-cog text-yellow-500 text-3xl"></i>
    </div>
  </div>
  <div class="bg-white shadow-md rounded-xl p-6 border-l-4 border-blue-500">
    <div class="flex justify-between items-center">
      <div>
        <p class="text-gray-500 text-sm">Shipped</p>
        <h3 class="text-2xl font-bold text-blue-600" id="shipped-count"><%= @shipped_count %></h3>
      </div>
      <i class="fas fa-truck text-blue-500 text-3xl"></i>
    </div>
  </div>
  <div class="bg-white shadow-md rounded-xl p-6 border-l-4 border-green-500">
    <div class="flex justify-between items-center">
      <div>
        <p class="text-gray-500 text-sm">Delivered</p>
        <h3 class="text-2xl font-bold text-green-600" id="delivered-count"><%= @delivered_count %></h3>
      </div>
      <i class="fas fa-check-circle text-green-500 text-3xl"></i>
    </div>
  </div>
</div>

    <!-- Search -->
    <div class="bg-white shadow-md rounded-xl p-6 mb-6">
      <div class="flex flex-wrap gap-4 mb-6">
        <div class="flex-1 min-w-0" data-orders-management-target="search">
          <label class="block text-sm font-medium text-gray-700 mb-1">Search by Order ID</label>
          <input type="text" data-orders-management-target="searchInput" value="<%= params[:search] %>" placeholder="Enter order ID..." class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-green-500 outline-none">
        </div>
      </div>

      <!-- Filters -->
      <div class="flex flex-wrap gap-4">
        <div class="flex-1 min-w-0" data-orders-management-target="status">
          <label class="block text-sm font-medium text-gray-700 mb-1">Status Filter</label>
          <select data-action="orders-management#filter" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-green-500 outline-none">
            <option value="">All Orders</option>
            <option value="pending" <%= 'selected' if params[:status] == 'pending' %>>Pending</option>
            <option value="processing" <%= 'selected' if params[:status] == 'processing' %>>Processing</option>
            <option value="shipped" <%= 'selected' if params[:status] == 'shipped' %>>Shipped</option>
            <option value="delivered" <%= 'selected' if params[:status] == 'delivered' %>>Delivered</option>
            <option value="cancelled" <%= 'selected' if params[:status] == 'cancelled' %>>Cancelled</option>
          </select>
        </div>
    <div data-orders-management-target="startDate">
      <label class="block text-sm font-medium text-gray-700 mb-1">From Date</label>
      <input type="date" data-action="orders-management#filter" value="<%= params[:start_date] %>"
             class="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-green-500 outline-none">
    </div>
    <div data-orders-management-target="endDate">
      <label class="block text-sm font-medium text-gray-700 mb-1">To Date</label>
      <input type="date" data-action="orders-management#filter" value="<%= params[:end_date] %>"
             class="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-green-500 outline-none">
    </div>
    <!-- Records per page selector -->
    <div class="flex items-end gap-2">
      

      <!-- Filter and Clear buttons -->
      <button data-action="orders-management#clearFilters" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition flex items-center space-x-2 mr-4">
        <i class="fas fa-search"></i><span>Filter</span>
      </button>
      <button data-action="orders-management#clearFilters" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition flex items-center space-x-2 mr-4">
        <i class="fas fa-times"></i><span>Clear</span>
      </button>

      <!-- Records per page selector - positioned to the right -->
     
    </div>
  </div>
</div>

<!-- Orders Table Container -->
<div id="orders-table-container">
  <%= render 'admin/orders/orders_table' %>
</div>
